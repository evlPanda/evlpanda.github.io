<!DOCTYPE html>
	<html>
		<head>
			<!--<link rel="stylesheet" type="text/css" href="/css/main.css">-->
			<link rel="stylesheet" type="text/css" href=/css/main.css>
			<title>CleanCodeExample01</title>
		</head>
		<body>
			<span class="logoBlue">import</span><span class="logoTitle"> The:PeopleSoft:Experience;</span>
			<nav>
					<ul>
						<li><a href=/>%EffDtCheck(&Posts a_ed, a, :1)</a></li>
						<li><a href=/blog>%SelectAll(Posts)</a></li>
						<li><a href=/blog>%SelectByKey(Posts)</a></li>
				</ul>
			</nav>
			<div class="container">

			</br>
<span class="comment">/* 30 Jun 2018 */</span></br>
<span class="blue">method</span><span class="yellow"> CleanCodeExample01</span>()

<div class="post">
  <p>There may be nothing harder to follow than a deeply nested series of loops and ifs with a collection of obfuscated variable and/or function names.</p>

<p><strong>Before:</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="sr">/* Make sure we have keys and phone and wallet
   before leaving for work. */</span>
<span class="no">While</span> <span class="o">&amp;</span><span class="n">user_keys</span> <span class="o">=</span> <span class="no">False</span> <span class="n">and</span>
  <span class="o">&amp;</span><span class="n">wallet</span> <span class="o">=</span> <span class="no">False</span> <span class="n">and</span>
  <span class="o">&amp;</span><span class="n">phone</span> <span class="o">&lt;&gt;</span> <span class="s2">"Y"</span>

  <span class="sr">/* If we have all of them. */</span>
  <span class="no">If</span> <span class="o">&amp;</span><span class="n">user_keys</span> <span class="o">=</span> <span class="no">True</span> <span class="no">Then</span>
    <span class="no">If</span> <span class="o">&amp;</span><span class="n">wallet</span> <span class="o">=</span> <span class="no">True</span> <span class="no">Then</span>
      <span class="no">If</span> <span class="o">&amp;</span><span class="n">phone</span> <span class="o">=</span> <span class="s2">"Y"</span> <span class="no">Then</span>
        <span class="no">P_Leave_For_Work</span><span class="p">();</span>
      <span class="no">Else</span>

        <span class="sr">/* Get phone. */</span>
        <span class="o">&amp;</span><span class="n">obj_ph</span> <span class="o">=</span> <span class="no">PhoneFinder</span><span class="p">(</span><span class="o">&amp;</span><span class="n">user</span><span class="p">);</span>
        <span class="n">local</span> <span class="n">integer</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">;</span>

        <span class="sr">/* Look for phone. */</span>
        <span class="k">for</span> <span class="o">&amp;</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="o">&amp;</span><span class="n">all_places</span><span class="p">.</span><span class="nf">len</span>
          <span class="k">if</span> <span class="o">&amp;</span><span class="n">all_places</span><span class="p">[</span><span class="o">&amp;</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"there is my phone!"</span>
            <span class="sr">/* found the phone! */</span>
            <span class="o">&amp;</span><span class="n">pocket</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="o">&amp;</span><span class="n">phone</span><span class="p">);</span>
            <span class="o">&amp;</span><span class="n">phone</span> <span class="o">=</span> <span class="s2">"Y"</span><span class="p">;</span>
          <span class="k">end</span><span class="o">-</span><span class="k">if</span><span class="p">;</span>
        <span class="k">end</span><span class="o">-</span><span class="k">for</span><span class="p">;</span>

      <span class="no">End</span><span class="o">-</span><span class="no">If</span><span class="p">;</span> <span class="sr">/* end phone if */</span>

    <span class="no">Else</span>    
      <span class="sr">/* Find wallet. */</span>
      <span class="no">DoFind</span><span class="p">(</span><span class="s2">"wallet"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">user</span><span class="p">);</span>
    <span class="no">End</span><span class="o">-</span><span class="no">If</span><span class="p">;</span>

  <span class="no">Else</span>
    <span class="sr">/* Find the keys. */</span>
    <span class="o">&amp;</span><span class="n">keys</span> <span class="o">=</span> <span class="no">LoadKeys</span><span class="p">(</span><span class="o">&amp;</span><span class="n">user</span><span class="p">,</span> <span class="s2">"house"</span><span class="p">,</span> <span class="kp">true</span><span class="p">,</span> <span class="n">null</span><span class="p">);</span>
  <span class="no">End</span><span class="o">-</span><span class="no">If</span><span class="p">;</span>

<span class="no">End</span><span class="o">-</span><span class="no">While</span><span class="p">;</span></code></pre></figure>

<p><strong>After:</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">function</span> <span class="no">GetPhone</span>
  <span class="n">local</span> <span class="n">integer</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span>
  <span class="k">for</span> <span class="o">&amp;</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="o">&amp;</span><span class="n">places</span><span class="p">.</span><span class="nf">len</span>
    <span class="k">if</span> <span class="o">&amp;</span><span class="n">places</span><span class="p">[</span><span class="o">&amp;</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"there is my phone!"</span>
      <span class="o">&amp;</span><span class="n">pocket</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="o">&amp;</span><span class="n">phone</span><span class="p">);</span>
    <span class="k">end</span><span class="o">-</span><span class="k">if</span><span class="p">;</span>
  <span class="k">end</span><span class="o">-</span><span class="k">for</span><span class="p">;</span>
<span class="k">end</span><span class="o">-</span><span class="n">function</span><span class="p">;</span>

<span class="no">If</span> <span class="n">not</span> <span class="o">&amp;</span><span class="n">hasHouseKeys</span> <span class="no">Then</span>
  <span class="no">GetHouseKeys</span><span class="p">();</span>
<span class="no">End</span><span class="o">-</span><span class="no">If</span><span class="p">;</span>
<span class="no">If</span> <span class="n">not</span> <span class="o">&amp;</span><span class="n">hasWallet</span> <span class="no">Then</span>
  <span class="no">GetWallet</span><span class="p">();</span>
<span class="no">End</span><span class="o">-</span><span class="no">If</span><span class="p">;</span>
<span class="no">If</span> <span class="n">not</span> <span class="o">&amp;</span><span class="n">hasPhone</span> <span class="no">Then</span>
  <span class="no">GetPhone</span><span class="p">();</span>
<span class="no">End</span><span class="o">-</span><span class="no">If</span><span class="p">;</span>
<span class="no">LeaveForWork</span><span class="p">();</span></code></pre></figure>

<p>You can remove <em>nested ifs</em> by checking for exceptions first. This leaves a clear <a href="https://en.wikipedia.org/wiki/Happy_path">happy path</a>.</p>

<p>Group logical chunks into their own functions.</p>

<p>Comments arenâ€™t required if you name your variables and functions self-descriptively.</p>

<p>Coding Horror goes into it some more <a href="https://blog.codinghorror.com/flattening-arrow-code/">in this article</a>.</p>

</div>

<span class="blue">end-method;</span>


			</div><!-- /.container -->
			<footer>
	    		<ul>
						<li><a href="mailto:m.nitschke@gmail.com">%EmailAddress</a></li>
						<li><a href="http://www.linkedin.com">TransferPage(Page.LinkedIn)</a></li>
						<li><a href=/articles>GetURL(URL.InterestingArticles)</a></li>
				</ul>
			</footer>
		</body>
	</html>
