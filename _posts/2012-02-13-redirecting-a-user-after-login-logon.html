---
layout: post
title: Redirecting a User after Login / Logon
date: 2012-02-13 04:35:00.000000000 +11:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags: []
meta:
  blogger_blog: capital-it.blogspot.com
  blogger_author: Michael Nitschke
  blogger_0c9a3d51488c214aefd1a54a659341d6_permalink: '6211068938826055450'
author:
  login: evlpanda
  email: m.nitschke@gmail.com
  display_name: Michael Nitschke
  first_name: ''
  last_name: ''
---
<p>This situation can be common in places like Universities. Students need to be redirected after login to some 'special' page, or an employee needs to be redirected if it is their first login, etcetera.</p>
<p>You could be forgiven for thinking this might be easily configurable somewhere. It doesn't seem to be (leave me a message if it is). Here's how I've done it.
<div>I've modified:<br /><b>AppPackage.PT_BRANDING</b><br /><b><br /></b><br /><b>Note </b>You're going to need a Global Variable to hold whether the user has been redirected yet or not, we only want to redirect once. You could easily put them into an endless redirect loop.</p>
</div>
<pre style="background-color:#eeeeee;border:1px dashed #999999;color:black;font-family:Andale Mono, Lucida Console, Monaco, fixed, monospace;font-size:12px;line-height:14px;overflow:auto;padding:5px;width:100%;"><code>Global boolean &amp;blnStudentHasBeenRedirected;<br /></code></pre>
<p>(You have to place that just after end-class;)</p>
<p>There is a Method <i>getHomepageJS</i> that, as its name implies, get JavaScript for the home page.
<pre style="background-color:#eeeeee;border:1px dashed #999999;color:black;font-family:Andale Mono, Lucida Console, Monaco, fixed, monospace;font-size:12px;line-height:14px;overflow:auto;padding:5px;width:100%;"><code>Return GetHTMLText(HTML.PT_HP2_JS_INCLUDE, &amp;cookieJS, &amp;refreshJS, &amp;refreshPgltJS, &amp;saveWarnCrossDomainJS, &amp;saveWarnJS, &amp;hpDndJS | Char(10) | Char(13) | %This.getCSSOverride());<br /><br /></code></pre>
<p>Note the getCSSOverride method. This is where I've added my extra JavaScript, the 6th bind variable.</p>
<pre style="border-image:initial;color:black;font-family:'Andale Mono', 'Lucida Console', Monaco, fixed, monospace;font-size:12px;line-height:14px;overflow-x:auto;overflow-y:auto;width:100%;border-color:rgb(153,153,153);border-style:dashed;border-width:1px;padding:5px;"><code><span style="background-color:#eeeeee;">method getCSSOverride<br />   /+ Returns String +/<br />   <br />   /* derived classes can override this method to add their own css override */<br />   Local string &amp;override = "";<br />   If %Request.BrowserType = "IE" Then<br />      &amp;override = "<!--[if lt IE 9]&gt;" | Char(10) | Char(13) | "" | Char(10) | Char(13) | "&lt;![endif]-->";<br />   End-If;<br />   Local AMS_PT_BRANDING:AmsHeader &amp;myAmsHeader = create AMS_PT_BRANDING:AmsHeader();<br />   </span><b style="background-color:#ffe599;">If &amp;myAmsHeader.isStudent Then</b><span style="background-color:#eeeeee;"><br />      &amp;override = &amp;override | Char(10) | Char(13) | "";<br />      <br />      /* Begin: QC1302 */<br />     </span><span style="background-color:#ffe599;"> If &amp;blnStudentHasBeenRedirected  True Then<br />         &amp;blnStudentHasBeenRedirected = True;<br />         &amp;override = &amp;override | Char(10) | Char(13) | "window.top.location.replace(""../c/AMS_EOL.AMSW3_STDNT_HOME.GBL"");";<br />      End-If;</span><span style="background-color:#eeeeee;"><br />      /* End: QC1302 */<br />      <br />   End-If;<br />   Return &amp;override;<br />end-method;<br /></span></code></pre>
<p>If they're a student, and they haven't already been redirected once, redirect them to the student home page.</p>
