---
layout: post
title: SQL to lock all objects in a Project
date: 2007-07-29 23:31:00.000000000 +10:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- http://schemas.google.com/blogger/2008/kind#post
- Lock
- objects
- project
tags: []
meta:
  blogger_blog: capital-it.blogspot.com
  blogger_author: Michael Nitschke
  blogger_0c9a3d51488c214aefd1a54a659341d6_permalink: '6045562797298150052'
author:
  login: evlpanda
  email: m.nitschke@gmail.com
  display_name: Michael Nitschke
  first_name: ''
  last_name: ''
---
<p>How to lock all the objects in a project, very useful when migrating mega projects.</p>
<p><span style="font-size:85%;"><span style="font-family:courier new;">INSERT INTO SYSADM.PSCHGCTLLOCK<br />SELECT<br /> 'yourID'<br />, A.OBJECTTYPE<br />, A.OBJECTID1<br />, A.OBJECTVALUE1<br />, A.OBJECTID2<br />, A.OBJECTVALUE2<br />, A.OBJECTID3<br />, A.OBJECTVALUE3<br />, A.OBJECTID4<br />, A.OBJECTVALUE4<br />, SYSDATE<br />, A.PROJECTNAME<br />, ' '<br />, ' '<br />FROM SYSADM.PSPROJECTITEM A<br />WHERE PROJECTNAME = 'projectName'<br />AND NOT EXISTS<br />   (SELECT 'X'<br />   FROM SYSADM.PSCHGCTLLOCK B<br />   WHERE B.OBJECTTYPE = A.OBJECTTYPE<br />   AND B.OBJECTID1 = A.OBJECTID1<br />   AND B.OBJECTVALUE1 = A.OBJECTVALUE1<br />   AND B.OBJECTID2 = A.OBJECTID2<br />   AND B.OBJECTVALUE2 = A.OBJECTVALUE2)<br />AND OBJECTTYPE  30 -- (SQL for views)</p>
<p></span><span style="font-family:courier new;"></span></span></p>
