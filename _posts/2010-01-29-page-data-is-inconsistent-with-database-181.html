---
layout: post
title: Page data is inconsistent with database (18,1)
date: 2010-01-29 01:23:00.000000000 +11:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Component CI Error
tags: []
meta:
  blogger_blog: capital-it.blogspot.com
  blogger_author: Michael Nitschke
  blogger_0c9a3d51488c214aefd1a54a659341d6_permalink: '5871276856903480784'
author:
  login: evlpanda
  email: m.nitschke@gmail.com
  display_name: Michael Nitschke
  first_name: ''
  last_name: ''
---
<p><span style="font-size:130%;">"Page data is inconsistent with database (18,1)"</span></p>
<p>I recently came across this during a call to a Component Interface, CI.HCR_PERSONAL_DATA_SRV, that interfaced with a rather large Component, Component.PERSONAL_DATA.<span style="font-style:italic;"></p>
<p>(Interestingly when I tested the CI stand-alone it worked fine, never figured out why/no time.</span>)</p>
<p>I created a Project that contained *all the objects for Component.PERSONAL_DATA. This can take some time if each page has sub-pages, and in turn they too have sub-pages. Be sure to include each record for each page, and each record's associated PeopleCode.<span style="text-decoration:underline;"><br /></span><a href="http://capital-it.blogspot.com/2010/01/inserting-peoplecode-into-project-via.html">See this post about how to do a lot of this via a SQL script or similar</a>.</p>
<p>I first checked that all the tables and views for the component had been built correctly after <span style="font-weight:bold;">a recent patch</span>. They were fine.</p>
<p>Next I checked PeopleCode, namely <span style="font-weight:bold;">SavePreChange </span>and <span style="font-weight:bold;">SavePostChange </span>as these are the events most likely to cause the given error. Recall that this error happens <span style="font-style:italic;">when data in the <span style="font-weight:bold;">buffer </span>pre save and data in the <span style="font-weight:bold;">database </span>post save do not match</span>. I simply went through each piece of code and remarked out likely looking code or entire sections...</p>
<p>...until the error stopped occuring. This pointed me to some custom code on SavePost that was updating a row via SQLExec on table x, new delivered code from the patch was updating table x in the buffer in SavePre. Thus the error. All-in-all took me a lot longer than it took to write this post.</p>
