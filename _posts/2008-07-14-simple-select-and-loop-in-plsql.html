---
layout: post
title: Simple Select and Loop in PL/SQL
date: 2008-07-14 06:10:00.000000000 +10:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags: []
meta:
  blogger_blog: capital-it.blogspot.com
  blogger_author: Michael Nitschke
  blogger_0c9a3d51488c214aefd1a54a659341d6_permalink: '3665440926689519549'
author:
  login: evlpanda
  email: m.nitschke@gmail.com
  display_name: Michael Nitschke
  first_name: ''
  last_name: ''
---
<p>Simple example of using PL/SQL to select and loop through a cursor.  <br /><strong>Note: </strong>Results are output to the output window.</p>
<p><!-- code formatted by http://manoli.net/csharpformat/ --></p>
<p>.csharpcode, .csharpcode pre<br />{<br /> font-size: small;<br /> color: black;<br /> font-family: Consolas, "Courier New", Courier, Monospace;<br /> background-color: #ffffff;<br /> /*white-space: pre;*/<br />}</p>
<p>.csharpcode pre { margin: 0em; }</p>
<p>.csharpcode .rem { color: #008000; }</p>
<p>.csharpcode .kwrd { color: #0000ff; }</p>
<p>.csharpcode .str { color: #006080; }</p>
<p>.csharpcode .op { color: #0000c0; }</p>
<p>.csharpcode .preproc { color: #cc6633; }</p>
<p>.csharpcode .asp { background-color: #ffff00; }</p>
<p>.csharpcode .html { color: #800000; }</p>
<p>.csharpcode .attr { color: #ff0000; }</p>
<p>.csharpcode .alt <br />{<br /> background-color: #f4f4f4;<br /> width: 100%;<br /> margin: 0em;<br />}</p>
<p>.csharpcode .lnum { color: #606060; }</p>
<pre class="csharpcode"><br /><span class="kwrd">CREATE</span> <span class="kwrd">OR</span> REPLACE <span class="kwrd">PROCEDURE</span> test(p_table_name <span class="kwrd">in</span> user_tables.table_name%type) <span class="kwrd">IS</span><br /><br />    TYPE ref_cursor <span class="kwrd">IS</span> <span class="kwrd">REF</span> <span class="kwrd">CURSOR</span>;<br />    l_cursor        ref_cursor;<br /><br />    v_query         varchar2(5000);<br />    v_name          varchar2(64);<br /><br /><span class="kwrd">BEGIN</span><br />    v_query := <span class="str">'select T120F005_COST_CATEGORY_CODE from '</span> || p_table_name;<br />    <span class="kwrd">OPEN</span> l_cursor <span class="kwrd">FOR</span> v_query;<br />    LOOP<br />        <span class="kwrd">FETCH</span> l_cursor <span class="kwrd">INTO</span> v_name;<br />        <span class="kwrd">EXIT</span> <span class="kwrd">WHEN</span> l_cursor%NOTFOUND;<br />        dbms_output.put_line(<span class="str">'Category Code: '</span> || v_name);<br />    <span class="kwrd">END</span> LOOP;<br />    <span class="kwrd">CLOSE</span> l_cursor;<br /><span class="kwrd">END</span>;<br />/<br /><br /><span class="rem">-- Test.</span><br /><span class="kwrd">EXEC</span> test(<span class="str">'T120_COSTING_CATEGORY'</span>);</pre>
